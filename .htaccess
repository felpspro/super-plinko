# -----------------------------
# Habilita reescrita de URLs
# -----------------------------
RewriteEngine On

# -----------------------------
# Permite acesso ao sw.js
# -----------------------------
<FilesMatch "sw\.js$">
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order allow,deny
        Allow from all
    </IfModule>
</FilesMatch>

# -----------------------------
# Permite acesso a arquivos públicos
# -----------------------------
<FilesMatch "\.(php|html|js|css|json|png|jpg|jpeg|gif|ico|svg|webp|woff|woff2|ttf|eot|mp3|wav|ogg|mp4|webm)$">
    <IfModule mod_authz_core.c>
        Require all granted
    </IfModule>
    <IfModule !mod_authz_core.c>
        Order allow,deny
        Allow from all
    </IfModule>
</FilesMatch>

# -----------------------------
# Redireciona tudo para index.php
# (útil para SPA ou rotas amigáveis)
# -----------------------------
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ index.php [L,QSA]

# -----------------------------
# Opcional: cache para arquivos estáticos
# -----------------------------
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType text/javascript "access plus 1 week"
</IfModule>
